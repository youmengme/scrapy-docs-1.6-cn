

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Using your browser’s Developer Tools for scraping &mdash; Scrapy 1.6.0 documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../_static/jquery.js"></script>
        <script type="text/javascript" src="../_static/underscore.js"></script>
        <script type="text/javascript" src="../_static/doctools.js"></script>
        <script type="text/javascript" src="../_static/language_data.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Debugging memory leaks" href="leaks.html" />
    <link rel="prev" title="Broad Crawls" href="broad-crawls.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home"> Scrapy
          

          
          </a>

          
            
            
              <div class="version">
                1.6
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">First steps</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../intro/overview.html">Scrapy 一目了然</a></li>
<li class="toctree-l1"><a class="reference internal" href="../intro/install.html">安装指南</a></li>
<li class="toctree-l1"><a class="reference internal" href="../intro/tutorial.html">Scrapy教程</a></li>
<li class="toctree-l1"><a class="reference internal" href="../intro/examples.html">示例</a></li>
</ul>
<p class="caption"><span class="caption-text">Basic concepts</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="commands.html">命令行工具</a></li>
<li class="toctree-l1"><a class="reference internal" href="spiders.html">爬虫（Spiders）</a></li>
<li class="toctree-l1"><a class="reference internal" href="selectors.html">选择器</a></li>
<li class="toctree-l1"><a class="reference internal" href="items.html">Items</a></li>
<li class="toctree-l1"><a class="reference internal" href="loaders.html">Item 装载器</a></li>
<li class="toctree-l1"><a class="reference internal" href="shell.html">Scrapy shell</a></li>
<li class="toctree-l1"><a class="reference internal" href="item-pipeline.html">Item Pipeline（项目管道）</a></li>
<li class="toctree-l1"><a class="reference internal" href="feed-exports.html">Feed 导出</a></li>
<li class="toctree-l1"><a class="reference internal" href="request-response.html">请求与响应</a></li>
<li class="toctree-l1"><a class="reference internal" href="link-extractors.html">链接提取器</a></li>
<li class="toctree-l1"><a class="reference internal" href="settings.html">设置</a></li>
<li class="toctree-l1"><a class="reference internal" href="exceptions.html">例外</a></li>
</ul>
<p class="caption"><span class="caption-text">Built-in services</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="logging.html">Logging</a></li>
<li class="toctree-l1"><a class="reference internal" href="stats.html">统计收集</a></li>
<li class="toctree-l1"><a class="reference internal" href="email.html">发送电子邮件</a></li>
<li class="toctree-l1"><a class="reference internal" href="telnetconsole.html">Telnet 控制台</a></li>
<li class="toctree-l1"><a class="reference internal" href="webservice.html">Web 服务</a></li>
</ul>
<p class="caption"><span class="caption-text">Solving specific problems</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../faq.html">Frequently Asked Questions</a></li>
<li class="toctree-l1"><a class="reference internal" href="debug.html">Debugging Spiders</a></li>
<li class="toctree-l1"><a class="reference internal" href="contracts.html">Spiders Contracts</a></li>
<li class="toctree-l1"><a class="reference internal" href="practices.html">Common Practices</a></li>
<li class="toctree-l1"><a class="reference internal" href="broad-crawls.html">Broad Crawls</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Using your browser’s Developer Tools for scraping</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#caveats-with-inspecting-the-live-browser-dom">Caveats with inspecting the live browser DOM</a></li>
<li class="toctree-l2"><a class="reference internal" href="#inspecting-a-website">Inspecting a website</a></li>
<li class="toctree-l2"><a class="reference internal" href="#the-network-tool">The Network-tool</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="leaks.html">Debugging memory leaks</a></li>
<li class="toctree-l1"><a class="reference internal" href="media-pipeline.html">下载和处理文件与图像</a></li>
<li class="toctree-l1"><a class="reference internal" href="deploy.html">Deploying Spiders</a></li>
<li class="toctree-l1"><a class="reference internal" href="autothrottle.html">AutoThrottle 扩展</a></li>
<li class="toctree-l1"><a class="reference internal" href="benchmarking.html">Benchmarking</a></li>
<li class="toctree-l1"><a class="reference internal" href="jobs.html">Jobs: pausing and resuming crawls</a></li>
</ul>
<p class="caption"><span class="caption-text">Extending Scrapy</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="architecture.html">架构概述</a></li>
<li class="toctree-l1"><a class="reference internal" href="downloader-middleware.html">Downloader Middleware</a></li>
<li class="toctree-l1"><a class="reference internal" href="spider-middleware.html">Spider Middleware</a></li>
<li class="toctree-l1"><a class="reference internal" href="extensions.html">扩展</a></li>
<li class="toctree-l1"><a class="reference internal" href="api.html">Core API</a></li>
<li class="toctree-l1"><a class="reference internal" href="signals.html">信号(Signals)</a></li>
<li class="toctree-l1"><a class="reference internal" href="exporters.html">Item Exporters</a></li>
</ul>
<p class="caption"><span class="caption-text">All the rest</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../news.html">Release notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../contributing.html">Contributing to Scrapy</a></li>
<li class="toctree-l1"><a class="reference internal" href="../versioning.html">Versioning and API Stability</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Scrapy</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
      <li>Using your browser’s Developer Tools for scraping</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/topics/developer-tools.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="using-your-browser-s-developer-tools-for-scraping">
<span id="topics-developer-tools"></span><h1>Using your browser’s Developer Tools for scraping<a class="headerlink" href="#using-your-browser-s-developer-tools-for-scraping" title="Permalink to this headline">¶</a></h1>
<p>Here is a general guide on how to use your browser’s Developer Tools
to ease the scraping process. Today almost all browsers come with
built in <a class="reference external" href="https://en.wikipedia.org/wiki/Web_development_tools">Developer Tools</a> and although we will use Firefox in this
guide, the concepts are applicable to any other browser.</p>
<p>In this guide we’ll introduce the basic tools to use from a browser’s
Developer Tools by scraping <a class="reference external" href="http://quotes.toscrape.com">quotes.toscrape.com</a>.</p>
<div class="section" id="caveats-with-inspecting-the-live-browser-dom">
<span id="topics-livedom"></span><h2>Caveats with inspecting the live browser DOM<a class="headerlink" href="#caveats-with-inspecting-the-live-browser-dom" title="Permalink to this headline">¶</a></h2>
<p>Since Developer Tools operate on a live browser DOM, what you’ll actually see
when inspecting the page source is not the original HTML, but a modified one
after applying some browser clean up and executing Javascript code.  Firefox,
in particular, is known for adding <code class="docutils literal notranslate"><span class="pre">&lt;tbody&gt;</span></code> elements to tables.  Scrapy, on
the other hand, does not modify the original page HTML, so you won’t be able to
extract any data if you use <code class="docutils literal notranslate"><span class="pre">&lt;tbody&gt;</span></code> in your XPath expressions.</p>
<p>Therefore, you should keep in mind the following things:</p>
<ul class="simple">
<li><p>Disable Javascript while inspecting the DOM looking for XPaths to be
used in Scrapy (in the Developer Tools settings click <cite>Disable JavaScript</cite>)</p></li>
<li><p>Never use full XPath paths, use relative and clever ones based on attributes
(such as <code class="docutils literal notranslate"><span class="pre">id</span></code>, <code class="docutils literal notranslate"><span class="pre">class</span></code>, <code class="docutils literal notranslate"><span class="pre">width</span></code>, etc) or any identifying features like
<code class="docutils literal notranslate"><span class="pre">contains(&#64;href,</span> <span class="pre">'image')</span></code>.</p></li>
<li><p>Never include <code class="docutils literal notranslate"><span class="pre">&lt;tbody&gt;</span></code> elements in your XPath expressions unless you
really know what you’re doing</p></li>
</ul>
</div>
<div class="section" id="inspecting-a-website">
<span id="topics-inspector"></span><h2>Inspecting a website<a class="headerlink" href="#inspecting-a-website" title="Permalink to this headline">¶</a></h2>
<p>By far the most handy feature of the Developer Tools is the <cite>Inspector</cite>
feature, which allows you to inspect the underlying HTML code of
any webpage. To demonstrate the Inspector, let’s look at the
<a class="reference external" href="http://quotes.toscrape.com">quotes.toscrape.com</a>-site.</p>
<p>On the site we have a total of ten quotes from various authors with specific
tags, as well as the Top Ten Tags. Let’s say we want to extract all the quotes
on this page, without any meta-information about authors, tags, etc.</p>
<p>Instead of viewing the whole source code for the page, we can simply right click
on a quote and select <code class="docutils literal notranslate"><span class="pre">Inspect</span> <span class="pre">Element</span> <span class="pre">(Q)</span></code>, which opens up the <cite>Inspector</cite>.
In it you should see something like this:</p>
<a class="reference internal image-reference" href="../_images/inspector_01.png"><img alt="Firefox's Inspector-tool" src="../_images/inspector_01.png" style="width: 777px; height: 469px;" /></a>
<p>The interesting part for us is this:</p>
<div class="highlight-html notranslate"><div class="highlight"><pre><span></span><span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;quote&quot;</span> <span class="na">itemscope</span><span class="o">=</span><span class="s">&quot;&quot;</span> <span class="na">itemtype</span><span class="o">=</span><span class="s">&quot;http://schema.org/CreativeWork&quot;</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">span</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;text&quot;</span> <span class="na">itemprop</span><span class="o">=</span><span class="s">&quot;text&quot;</span><span class="p">&gt;</span>(...)<span class="p">&lt;/</span><span class="nt">span</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">span</span><span class="p">&gt;</span>(...)<span class="p">&lt;/</span><span class="nt">span</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;tags&quot;</span><span class="p">&gt;</span>(...)<span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</pre></div>
</div>
<p>If you hover over the first <code class="docutils literal notranslate"><span class="pre">div</span></code> directly above the <code class="docutils literal notranslate"><span class="pre">span</span></code> tag highlighted
in the screenshot, you’ll see that the corresponding section of the webpage gets
highlighted as well. So now we have a section, but we can’t find our quote text
anywhere.</p>
<p>The advantage of the <cite>Inspector</cite> is that it automatically expands and collapses
sections and tags of a webpage, which greatly improves readability. You can
expand and collapse a tag by clicking on the arrow in front of it or by double
clicking directly on the tag. If we expand the <code class="docutils literal notranslate"><span class="pre">span</span></code> tag with the <code class="docutils literal notranslate"><span class="pre">class=</span>
<span class="pre">&quot;text&quot;</span></code> we will see the quote-text we clicked on. The <cite>Inspector</cite> lets you
copy XPaths to selected elements. Let’s try it out: Right-click on the <code class="docutils literal notranslate"><span class="pre">span</span></code>
tag, select <code class="docutils literal notranslate"><span class="pre">Copy</span> <span class="pre">&gt;</span> <span class="pre">XPath</span></code> and paste it in the scrapy shell like so:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ scrapy shell &quot;http://quotes.toscrape.com/&quot;
(...)
&gt;&gt;&gt; response.xpath(&#39;/html/body/div/div[2]/div[1]/div[1]/span[1]/text()&#39;).getall()
[&#39;&quot;The world as we have created it is a process of our thinking. It cannot be changed without changing our thinking.”]
</pre></div>
</div>
<p>Adding <code class="docutils literal notranslate"><span class="pre">text()</span></code> at the end we are able to extract the first quote with this
basic selector. But this XPath is not really that clever. All it does is
go down a desired path in the source code starting from <code class="docutils literal notranslate"><span class="pre">html</span></code>. So let’s
see if we can refine our XPath a bit:</p>
<p>If we check the <cite>Inspector</cite> again we’ll see that directly beneath our
expanded <code class="docutils literal notranslate"><span class="pre">div</span></code> tag we have nine identical <code class="docutils literal notranslate"><span class="pre">div</span></code> tags, each with the
same attributes as our first. If we expand any of them, we’ll see the same
structure as with our first quote: Two <code class="docutils literal notranslate"><span class="pre">span</span></code> tags and one <code class="docutils literal notranslate"><span class="pre">div</span></code> tag. We can
expand each <code class="docutils literal notranslate"><span class="pre">span</span></code> tag with the <code class="docutils literal notranslate"><span class="pre">class=&quot;text&quot;</span></code> inside our <code class="docutils literal notranslate"><span class="pre">div</span></code> tags and
see each quote:</p>
<div class="highlight-html notranslate"><div class="highlight"><pre><span></span><span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;quote&quot;</span> <span class="na">itemscope</span><span class="o">=</span><span class="s">&quot;&quot;</span> <span class="na">itemtype</span><span class="o">=</span><span class="s">&quot;http://schema.org/CreativeWork&quot;</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">span</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;text&quot;</span> <span class="na">itemprop</span><span class="o">=</span><span class="s">&quot;text&quot;</span><span class="p">&gt;</span>
    “The world as we have created it is a process of our thinking. It cannot be changed without changing our thinking.”
  <span class="p">&lt;/</span><span class="nt">span</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">span</span><span class="p">&gt;</span>(...)<span class="p">&lt;/</span><span class="nt">span</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;tags&quot;</span><span class="p">&gt;</span>(...)<span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</pre></div>
</div>
<p>With this knowledge we can refine our XPath: Instead of a path to follow,
we’ll simply select all <code class="docutils literal notranslate"><span class="pre">span</span></code> tags with the <code class="docutils literal notranslate"><span class="pre">class=&quot;text&quot;</span></code> by using
the <a class="reference external" href="https://parsel.readthedocs.io/en/latest/usage.html#other-xpath-extensions">has-class-extension</a>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span> <span class="o">&gt;&gt;&gt;</span> <span class="n">response</span><span class="o">.</span><span class="n">xpath</span><span class="p">(</span><span class="s1">&#39;//span[has-class(&quot;text&quot;)]/text()&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">getall</span><span class="p">()</span>
<span class="p">[</span><span class="s1">&#39;&quot;The world as we have created it is a process of our thinking. It cannot be changed without changing our thinking.”,</span>
 <span class="s1">&#39;“It is our choices, Harry, that show what we truly are, far more than our abilities.”&#39;</span><span class="p">,</span>
 <span class="s1">&#39;“There are only two ways to live your life. One is as though nothing is a miracle. The other is as though everything is a miracle.”&#39;</span><span class="p">,</span>
 <span class="p">(</span><span class="o">...</span><span class="p">)]</span>
</pre></div>
</div>
<p>And with one simple, cleverer XPath we are able to extract all quotes from
the page. We could have constructed a loop over our first XPath to increase
the number of the last <code class="docutils literal notranslate"><span class="pre">div</span></code>, but this would have been unnecessarily
complex and by simply constructing an XPath with <code class="docutils literal notranslate"><span class="pre">has-class(&quot;text&quot;)</span></code>
we were able to extract all quotes in one line.</p>
<p>The <cite>Inspector</cite> has a lot of other helpful features, such as searching in the
source code or directly scrolling to an element you selected. Let’s demonstrate
a use case:</p>
<p>Say you want to find the <code class="docutils literal notranslate"><span class="pre">Next</span></code> button on the page. Type <code class="docutils literal notranslate"><span class="pre">Next</span></code> into the
search bar on the top right of the <cite>Inspector</cite>. You should get two results.
The first is a <code class="docutils literal notranslate"><span class="pre">li</span></code> tag with the <code class="docutils literal notranslate"><span class="pre">class=&quot;text&quot;</span></code>, the second the text
of an <code class="docutils literal notranslate"><span class="pre">a</span></code> tag. Right click on the <code class="docutils literal notranslate"><span class="pre">a</span></code> tag and select <code class="docutils literal notranslate"><span class="pre">Scroll</span> <span class="pre">into</span> <span class="pre">View</span></code>.
If you hover over the tag, you’ll see the button highlighted. From here
we could easily create a <a class="reference internal" href="link-extractors.html#topics-link-extractors"><span class="std std-ref">Link Extractor</span></a> to
follow the pagination. On a simple site such as this, there may not be
the need to find an element visually but the <code class="docutils literal notranslate"><span class="pre">Scroll</span> <span class="pre">into</span> <span class="pre">View</span></code> function
can be quite useful on complex sites.</p>
<p>Note that the search bar can also be used to search for and test CSS
selectors. For example, you could search for <code class="docutils literal notranslate"><span class="pre">span.text</span></code> to find
all quote texts. Instead of a full text search, this searches for
exactly the <code class="docutils literal notranslate"><span class="pre">span</span></code> tag with the <code class="docutils literal notranslate"><span class="pre">class=&quot;text&quot;</span></code> in the page.</p>
</div>
<div class="section" id="the-network-tool">
<span id="topics-network-tool"></span><h2>The Network-tool<a class="headerlink" href="#the-network-tool" title="Permalink to this headline">¶</a></h2>
<p>While scraping you may come across dynamic webpages where some parts
of the page are loaded dynamically through multiple requests. While
this can be quite tricky, the <cite>Network</cite>-tool in the Developer Tools
greatly facilitates this task. To demonstrate the Network-tool, let’s
take a look at the page <a class="reference external" href="quotes.toscrape.com/scroll/">quotes.toscrape.com/scroll</a>.</p>
<p>The page is quite similar to the basic <a class="reference external" href="http://quotes.toscrape.com">quotes.toscrape.com</a>-page,
but instead of the above-mentioned <code class="docutils literal notranslate"><span class="pre">Next</span></code> button, the page
automatically loads new quotes when you scroll to the bottom. We
could go ahead and try out different XPaths directly, but instead
we’ll check another quite useful command from the scrapy shell:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ scrapy shell &quot;quotes.toscrape.com/scroll&quot;
(...)
&gt;&gt;&gt; view(response)
</pre></div>
</div>
<p>A browser window should open with the webpage but with one
crucial difference: Instead of the quotes we just see a greenish
bar with the word <code class="docutils literal notranslate"><span class="pre">Loading...</span></code>.</p>
<a class="reference internal image-reference" href="../_images/network_01.png"><img alt="Response from quotes.toscrape.com/scroll" src="../_images/network_01.png" style="width: 777px; height: 296px;" /></a>
<p>The <code class="docutils literal notranslate"><span class="pre">view(response)</span></code> command let’s us view the response our
shell or later our spider receives from the server. Here we see
that some basic template is loaded which includes the title,
the login-button and the footer, but the quotes are missing. This
tells us that the quotes are being loaded from a different request
than <code class="docutils literal notranslate"><span class="pre">quotes.toscrape/scroll</span></code>.</p>
<p>If you click on the <code class="docutils literal notranslate"><span class="pre">Network</span></code> tab, you will probably only see
two entries. The first thing we do is enable persistent logs by
clicking on <code class="docutils literal notranslate"><span class="pre">Persist</span> <span class="pre">Logs</span></code>. If this option is disabled, the
log is automatically cleared each time you navigate to a different
page. Enabling this option is a good default, since it gives us
control on when to clear the logs.</p>
<p>If we reload the page now, you’ll see the log get populated with six
new requests.</p>
<a class="reference internal image-reference" href="../_images/network_02.png"><img alt="Network tab with persistent logs and requests" src="../_images/network_02.png" style="width: 777px; height: 241px;" /></a>
<p>Here we see every request that has been made when reloading the page
and can inspect each request and its response. So let’s find out
where our quotes are coming from:</p>
<p>First click on the request with the name <code class="docutils literal notranslate"><span class="pre">scroll</span></code>. On the right
you can now inspect the request. In <code class="docutils literal notranslate"><span class="pre">Headers</span></code> you’ll find details
about the request headers, such as the URL, the method, the IP-address,
and so on. We’ll ignore the other tabs and click directly on <code class="docutils literal notranslate"><span class="pre">Reponse</span></code>.</p>
<p>What you should see in the <code class="docutils literal notranslate"><span class="pre">Preview</span></code> pane is the rendered HTML-code,
that is exactly what we saw when we called <code class="docutils literal notranslate"><span class="pre">view(response)</span></code> in the
shell. Accordingly the <code class="docutils literal notranslate"><span class="pre">type</span></code> of the request in the log is <code class="docutils literal notranslate"><span class="pre">html</span></code>.
The other requests have types like <code class="docutils literal notranslate"><span class="pre">css</span></code> or <code class="docutils literal notranslate"><span class="pre">js</span></code>, but what
interests us is the one request called <code class="docutils literal notranslate"><span class="pre">quotes?page=1</span></code> with the
type <code class="docutils literal notranslate"><span class="pre">json</span></code>.</p>
<p>If we click on this request, we see that the request URL is
<code class="docutils literal notranslate"><span class="pre">http://quotes.toscrape.com/api/quotes?page=1</span></code> and the response
is a JSON-object that contains our quotes. We can also right-click
on the request and open <code class="docutils literal notranslate"><span class="pre">Open</span> <span class="pre">in</span> <span class="pre">new</span> <span class="pre">tab</span></code> to get a better overview.</p>
<a class="reference internal image-reference" href="../_images/network_03.png"><img alt="JSON-object returned from the quotes.toscrape API" src="../_images/network_03.png" style="width: 777px; height: 375px;" /></a>
<p>With this response we can now easily parse the JSON-object and
also request each page to get every quote on the site:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">scrapy</span>
<span class="kn">import</span> <span class="nn">json</span>


<span class="k">class</span> <span class="nc">QuoteSpider</span><span class="p">(</span><span class="n">scrapy</span><span class="o">.</span><span class="n">Spider</span><span class="p">):</span>
    <span class="n">name</span> <span class="o">=</span> <span class="s1">&#39;quote&#39;</span>
    <span class="n">allowed_domains</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;quotes.toscrape.com&#39;</span><span class="p">]</span>
    <span class="n">page</span> <span class="o">=</span> <span class="mi">1</span>
    <span class="n">start_urls</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;http://quotes.toscrape.com/api/quotes?page=1]</span>

    <span class="k">def</span> <span class="nf">parse</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">response</span><span class="p">):</span>
        <span class="n">data</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">text</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">quote</span> <span class="ow">in</span> <span class="n">data</span><span class="p">[</span><span class="s2">&quot;quotes&quot;</span><span class="p">]:</span>
            <span class="k">yield</span> <span class="p">{</span><span class="s2">&quot;quote&quot;</span><span class="p">:</span> <span class="n">quote</span><span class="p">[</span><span class="s2">&quot;text&quot;</span><span class="p">]}</span>
        <span class="k">if</span> <span class="n">data</span><span class="p">[</span><span class="s2">&quot;has_next&quot;</span><span class="p">]:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">page</span> <span class="o">+=</span> <span class="mi">1</span>
            <span class="n">url</span> <span class="o">=</span> <span class="s2">&quot;http://quotes.toscrape.com/api/quotes?page=</span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">page</span><span class="p">)</span>
            <span class="k">yield</span> <span class="n">scrapy</span><span class="o">.</span><span class="n">Request</span><span class="p">(</span><span class="n">url</span><span class="o">=</span><span class="n">url</span><span class="p">,</span> <span class="n">callback</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">parse</span><span class="p">)</span>
</pre></div>
</div>
<p>This spider starts at the first page of the quotes-API. With each
response, we parse the <code class="docutils literal notranslate"><span class="pre">response.text</span></code> and assign it to <code class="docutils literal notranslate"><span class="pre">data</span></code>.
This lets us operate on the JSON-object like on a Python dictionary.
We iterate through the <code class="docutils literal notranslate"><span class="pre">quotes</span></code> and print out the <code class="docutils literal notranslate"><span class="pre">quote[&quot;text&quot;]</span></code>.
If the handy <code class="docutils literal notranslate"><span class="pre">has_next</span></code> element is <code class="docutils literal notranslate"><span class="pre">true</span></code> (try loading
<a class="reference external" href="http://quotes.toscrape.com/api/quotes?page=10">quotes.toscrape.com/api/quotes?page=10</a> in your browser or a
page-number greater than 10), we increment the <code class="docutils literal notranslate"><span class="pre">page</span></code> attribute
and <code class="docutils literal notranslate"><span class="pre">yield</span></code> a new request, inserting the incremented page-number
into our <code class="docutils literal notranslate"><span class="pre">url</span></code>.</p>
<p>You can see that with a few inspections in the <cite>Network</cite>-tool we
were able to easily replicate the dynamic requests of the scrolling
functionality of the page. Crawling dynamic pages can be quite
daunting and pages can be very complex, but it (mostly) boils down
to identifying the correct request and replicating it in your spider.</p>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="leaks.html" class="btn btn-neutral float-right" title="Debugging memory leaks" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="broad-crawls.html" class="btn btn-neutral float-left" title="Broad Crawls" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2008–2018, Scrapy developers
      <span class="lastupdated">
        Last updated on Feb 27, 2020.
      </span>

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
  
 
<script type="text/javascript">
!function(){var analytics=window.analytics=window.analytics||[];if(!analytics.initialize)if(analytics.invoked)window.console&&console.error&&console.error("Segment snippet included twice.");else{analytics.invoked=!0;analytics.methods=["trackSubmit","trackClick","trackLink","trackForm","pageview","identify","reset","group","track","ready","alias","page","once","off","on"];analytics.factory=function(t){return function(){var e=Array.prototype.slice.call(arguments);e.unshift(t);analytics.push(e);return analytics}};for(var t=0;t<analytics.methods.length;t++){var e=analytics.methods[t];analytics[e]=analytics.factory(e)}analytics.load=function(t){var e=document.createElement("script");e.type="text/javascript";e.async=!0;e.src=("https:"===document.location.protocol?"https://":"http://")+"cdn.segment.com/analytics.js/v1/"+t+"/analytics.min.js";var n=document.getElementsByTagName("script")[0];n.parentNode.insertBefore(e,n)};analytics.SNIPPET_VERSION="3.1.0";
analytics.load("8UDQfnf3cyFSTsM4YANnW5sXmgZVILbA");
analytics.page();
}}();

analytics.ready(function () {
    ga('require', 'linker');
    ga('linker:autoLink', ['scrapinghub.com', 'crawlera.com']);
});
</script>


</body>
</html>